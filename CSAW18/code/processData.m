function stream=processData(Rawstream)
colorarr={'00','00','01','01','10','10','11','11'};
%Key={''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'','01110',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'',''null'','111','10111100','101100000','10100111111','1011111010111000','10111110101110100','1011111010111011','000111010','000111011000','000100000111','000111011010',''null'','110000','0001111','0001001','10111110101111','000111011011','10111110100','00010000010','101111101010','1010011111010','1010011111011','1010011111001','0001110111100','000100000110','0001110111101','0001000011','00010101',''null'',''null'',''null'','00011101110','10111110101110101','11000110','110001111','1011111011','101001010','00010100','101100010','101001011','00010001','10111111','000111011001','1011000111','101001001','00011100','101111100','110001110','101111010','1010011111000','101001110','10100110','1000001','1011000010','1010011110','101111011','000111011111','1011000011',''null'','10110001100',''null'','10110001101',''null'',''null'','1011111010111001','0101','1011001','101010','01111','1101','101101','101011','0000','0011','101001000','0001011','10001','101000','0100','0110','1100010','0001000010','11001','0010','1001','101110','1000000','100001','0001000000','000110','1011111010110',''null'',''null'',''null'',''null'',''null''};
%Key={'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', '01010', 'null', 'null', '01011', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', '111', '10110100', '101010000', '10001111111', '1011011010111001', '10110110101110100', '1011011010111011', '000011010', '000011011000', '000000000111', '000011011010', 'null', '101110', '0000111', '0000001', '10110110101111', '000011011011', '10110110100', '00000000010', '101101101010', '1000111111011', '1000111111010', '1000111111000', '0000110111100', '000000000110', '0000110111101', '0000000011', '00000101', 'null', 'null', 'null', '00001101110', '10110110101110101', '10111110', '101111111', '1011011011', '100011010', '00000100', '101010010', '100011011', '00000001', '10110111', '000011011001', '1010100111', '100011001', '00001100', '101101100', '101111110', '101101010', '1000111111001', '100011110', '10001110', '0111101', '1010100010', '1000111110', '101101011', '000011011111', '1010100011', 'null', '10101001100', 'null', '10101001101', 'null', 'null', '1011011010111000', '0100', '1010101', '101000', '01110', '1100', '101011', '101001', '11011', '0010', '100011000', '0000011', '10000', '100010', '0011', '0110', '1011110','0000000010', '11010', '0001', '1001', '101100', '0111100', '011111', '0000000000', '000010', '1011011010110', 'null', 'null', 'null', 'null', 'null'};
Key={'null','null','null','null','null','null','null','null','null','00101101111000010','01110','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','null','111','11000000','101100000','10110000100','10110001100011001','00101101111000011','1011000110001101','001011010','001000101101','001000101100','001000101111','1011000110001111','101111','0010111','0010000','0010110110000','001011011001','11000011100','110000111011','101100011001','1011000110000','0010110111111','0010110111101','0010110110001','1100001110101','0010110111010','0010001010','00100101','001011011101100','001011011110001','001011011110010','00101101101','10110001100011000','11000110','110001111','1100001111','101001010','00100100','101100010','101001011','00100011','11000010','001000101110','1011000111','101001001','00101100','110000110','110001110','110000010','0010110111110','101001110','10100110','1000001','1010011111','1010011110','110000011','001011011100','1011000011','001011011101110','10110000101','001011011101101','10110001101','001011011110011','1011000110001110','0010110111100000','0101','1011001','101010','01111','1101','101101','101011','0000','0011','101001000','0010011','10001','101000','0100','0110','1100010','0010001001','11001','0001','1001','101110','1000000','100001','0010001000','001010','1100001110100','101100011000100','101100011000101','001011011101111','null','null'};
value=[1:128];
M = containers.Map(Key,value);
stream={};
data=[];
freq=11.5; %11.5 - 500ms, 9.2-400ms,300ms, 5- 200ms, 1.55=100ms
mincount=6; % 6 - 500ms,400ms , 4- 300ms, 3-200ms, 1-100ms
color=-1;count=0;
for i=1:length(Rawstream)
    curr=Rawstream(i);
    %fprintf('\ncurr:%d color:%d count:%d',curr,color,count);
    if(curr == color && curr > 0 && i~=length(Rawstream))
        count=count+1;
    else
        if(count >=mincount)
            times=round(count/freq);
            for i=1:times
                data=[data,color];
            end
        end
        count=0;
    end
    color=curr;
end
% Getting code from colors %
temp='';
for i=1:length(data)
    txt=colorarr{data(i)};
    if(mod(data(i),2)==0 && (strcmp(txt,'11') || strcmp(txt,'10')) && (~isKey(M,[temp,txt])))
        temp=[temp,txt(2)];
        %disp('Ambiguity correction...');
    else
        temp=[temp,txt];
    end
    if(mod(data(i),2)==0)
        if(~isKey(M,temp))
            temp=[temp(1:end-2),temp(end)];
        end
        stream=[stream,temp];
        temp='';
    end
end
end